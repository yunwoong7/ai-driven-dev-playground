## 1. 프로젝트 개요

### 1.1 목적
- **로그인/회원가입 없이** 로컬 환경에서 영어 작문 학습을 수행하는 MVP.
- **GPT 분석(5단계 평가)**, **자유 주제** 입력, **검색(연관 표현, Tavily API)**, **수정 후 재피드백**까지 가능하도록 기능 확장.
- 사용자에게 **학습 집중도**를 높이는 간단 UI를 제공하되, **추가 기능**(히ント, 검색, 자세한 피드백, 수정/재분석 등)을 점진적으로 통합.

### 1.2 주요 목표
1. **일별 학습 기록**(리스트/상세 보기) + GPT 평가(5단계 & 피드백).
2. **자유롭게 주제(topic)를 입력**하거나 **주제별 힌트**(GPT가 제공하는 예시 표현) 기능.
3. **검색 기능**(Tavily API)과 연계해 유사 사례나 표현을 받아 **추가 학습** 가능.
4. **수정 후 재분석**: 작성 문장을 재작성하고 GPT 평가를 다시 받을 수 있음.
5. 원활한 개발·테스트를 위해 **README.md**에 설치/실행 가이드를 포함.

---

## 2. 유저 플로우

### 2.1 메인 화면 진입
1. 사용자는 로컬 환경(예: `localhost:3000`)에서 페이지에 접속.
2. **메인 화면**에 날짜별 학습 기록 리스트가 표시됨.  
   - 각 날짜마다 **평가 단계 아이콘** + 간단한 요약(예: 작성 문장 일부, 주제)  
   - 기록이 없는 날짜는 “작문 없음” 표시
3. “새로운 작문 작성” 버튼 클릭 시 **작문 작성 페이지**로 이동.

### 2.2 작문 작성
1. **주제 입력 필드**: 사용자는 자유롭게 텍스트로 주제를 입력(예: “재택근무”).
2. **작성하기**: Textarea에 영어 문장을 입력.
3. **힌트 요청**:  
   - “힌트” 버튼 클릭 시, 현재 주제(예: “재택근무”)를 GPT에 전달해 관련 **영어 표현 10개**를 받아 팝업으로 표시.  
   - 팝업에서는 **재생성** 버튼을 눌러 새로운 힌트를 다시 받아볼 수 있음.  
   - 로딩 중에는 **Spinner(또는 Progress Bar)**로 진행상황을 안내.
4. **분석하기**:  
   - “분석하기” 버튼 클릭 → GPT API로 작문 분석.  
   - **5단계(Beginner~Master)** 평가 + 피드백(문법 지적, 개선 표현) + 검색 키워드(추가 학습용) 를 받아온다.  
   - 결과를 **로컬 DB**에 저장 후 사용자에게 화면에 표시(즉시).

### 2.3 GPT 피드백 상세 보기
1. **메인 화면**에서 날짜별 기록을 클릭(또는 “상세 보기” 버튼)하면, 해당 작문과 함께 **GPT 피드백**을 볼 수 있는 페이지(또는 모달)로 이동.
2. 피드백은 **요약/강점/수정 제안** 구역으로 나누어 표시.
3. 아이콘(예: Lucide React) 옆에 “이 아이콘은 Upper Intermediate를 의미합니다” 등 **단계 의미**를 텍스트로도 안내.
4. 화면 하단에 “연관 검색” 버튼을 두어, GPT가 제시한 **검색 키워드**로 Tavily API 검색 → 검색 결과를 GPT에 재전달 → “내가 말한 것처럼” 재작성된 영어 표현을 받아 표시.

### 2.4 검색 기능 (Tavily API)
1. **연관 검색** 버튼 클릭 → Tavily API로 해당 키워드를 검색 → 결과 목록(유사 문장, 표현 등)을 수신.
2. 이 검색 결과를 다시 GPT에게 전달해, “내 상황에 맞게, 자연스럽게 재구성” 요청.  
3. GPT 응답(새로운 예시 표현)을 사용자에게 표시.
4. 진행 중에 **상태 표시(Progress Bar/Spinner)**를 노출해 검색과 재생성 과정을 안내.

### 2.5 수정 & 재분석
1. 사용자는 과거(또는 방금 작성한) 글을 **수정**할 수 있음.  
2. 수정 내용 저장 후, “다시 분석하기” 버튼을 눌러 **GPT 피드백을 재생성**.
3. 최신 피드백(레벨, 수정 제안, 검색 키워드 등)으로 갱신.

### 2.6 README 및 디자인 수정
1. **README.md**:  
   - 프로젝트 설치(`pnpm install`), 실행(`pnpm dev`) 과정을 상세히 안내.  
   - 주요 폴더 및 파일 구조, 환경 변수 설정(예: `.env`에 `OPENAI_API_KEY`) 등 설명.
2. **디자인 개선**:  
   - 어디서 스타일을 수정하는지 **가이드** 제공 (예: `app/layout.tsx`, `styles/globals.css`, Tailwind config, ShadCN 컴포넌트 등).  
   - 컴포넌트별 UI 수정 시 **`components/` 디렉터리**에 있는 각각의 파일을 수정.

---

## 3. 핵심 기능

1. **자유 주제 입력**: 사용자 지정 주제 기반으로 GPT 힌트, 검색 키워드 생성.
2. **GPT 5단계 평가 & 피드백**:  
   - Beginner, Intermediate, Upper Intermediate, Advanced, Master  
   - **지적 + 개선된 표현** 함께 제공
   - **요약/강점/수정 제안** 구분
   - 검색 키워드도 함께 반환
3. **Tavily API 연동**:  
   - GPT가 제안한 키워드로 검색 → 결과를 다시 GPT에게 전달 → 새 표현/응용 예시 생성
4. **수정 & 재분석**:  
   - 작성 기록을 편집 후, GPT 피드백 재요청 가능
5. **힌트 요청**:  
   - 주제 관련 10개 표현(반복 재생성 가능), 팝업에 노출
6. **로딩/진행 상태 표시**:  
   - GPT 분석, Tavily 검색, 힌트 생성 등 시간이 걸리는 작업에 Spinner/Progress Bar 제공

---

## 4. UI/UX 설계

1. **메인 화면**  
   - 날짜별 기록 리스트(카드/테이블).  
   - 각 항목에 **아이콘 + 레벨 텍스트** 표시 (예: “(Master)” 등).  
   - 클릭 시 상세 피드백 보기.
2. **작문 페이지**  
   - “주제 입력” 필드(텍스트 자유 입력)  
   - 작성 Textarea  
   - “힌트” 버튼 → 팝업(10개 표현) + “재생성” 버튼  
   - “분석하기” 버튼 → 결과(레벨, 피드백, 검색 키워드)를 하단에 출력
3. **상세 피드백 페이지/모달**  
   - 요약 / 강점 / 수정 제안 구역으로 나눈 텍스트 표시  
   - 검색 키워드 표시 → “연관 검색” 버튼 클릭 시 Tavily API 호출 & 재가공  
   - 수정 기능(수정 후 재분석)
4. **디자인 개선 가이드**  
   - TailwindCSS / ShadCN 컴포넌트 스타일 수정:  
     - 전역 스타일: `styles/globals.css`, `tailwind.config.js`  
     - 개별 UI: `components/` 내 컴포넌트별 파일
   - 로딩 시 **Spinner**(ShadCN 로딩 컴포넌트)나 **Progress Bar** 사용

---

## 5. 데이터 모델링

| 테이블명: `Records`  | 타입/설명                                             |
|----------------------|-------------------------------------------------------|
| `id` (string)        | UUID 등 고유 식별자                                   |
| `date` (string)      | YYYY-MM-DD 형태 날짜                                   |
| `topic` (string)     | 자유 주제(예: “재택근무”, “비즈니스 영어”)              |
| `content` (text)     | 작성 문장                                              |
| `level` (string)     | 5단계 중 하나 (Beginner~Master)                        |
| `feedbackSummary`(text)| GPT가 제공한 피드백 요약                             |
| `feedbackStrength`(text)| GPT가 제공한 강점                                  |
| `feedbackCorrection`(text)| GPT가 제안한 수정 표현                           |
| `searchKeyword`(string)| Tavily API 검색용 키워드 (GPT가 제안)                |
| `createdAt` (datetime)| 레코드 생성 시간                                     |
| `updatedAt` (datetime)| 수정 시간 (수정 & 재분석 시 업데이트)                 |

> **힌트**(팝업에서 보여줄 10개 표현)는 DB에 굳이 저장하지 않고, **일시적**(상태)으로만 관리하거나 필요 시 별도 테이블(Logs/Hints)로 저장 가능.

---

## 6. 기술 스택

- **Next.js(App Router)**  
  - Server/Client 컴포넌트 분리, `"use client"` 사용  
  - `pages` 없이 `app/` 구조로 라우팅
- **ShadCN + TailwindCSS**  
  - UI 컴포넌트 & 간단한 반응형 스타일링
- **Lucide React**  
  - 5단계 레벨별 아이콘 표시 + 레벨 텍스트
- **LangChain.js**  
  - GPT API 호출 및 프롬프트 체인 관리
- **OpenAI GPT API**  
  - 작성 내용 → 5단계 분석, 요약/강점/수정 제안, 검색 키워드  
  - 힌트(10개 표현) 생성
- **Tavily API**  
  - GPT가 제안한 검색 키워드로 유사 표현/문장 검색
- **SQLite(로컬)**  
  - Records 테이블로 CRUD

### 6.1 성능 및 보안 요구사항

- **메인 화면** 로딩(로컬 DB)은 즉시 (<1초).
- **GPT/Tavily API** 호출 시 로딩 스피너로 UX 제공.
- **API Key**는 `.env`로 관리, Git에 노출 금지.
- **재분석/검색** 등 반복 호출 시, 요청 횟수를 모니터링(과도한 트래픽 방지).

---

## 7. 개발 로드맵

### 7.1 Phase 1: 기본 구조 & 메인 화면
1. 프로젝트 초기화, `pnpm install`, `package.json` 설정, SQLite DB 연결  
2. 메인 화면(리스트 뷰) + “새로운 작문 작성” 라우트
3. 단순 피드백(5단계)만 먼저 구현

### 7.2 Phase 2: 주제 & 힌트 & 상세 피드백
1. **주제 입력** + GPT 힌트(10개 표현) 팝업  
2. GPT에서 요약/강점/수정 제안 분리하여 받기
3. 상세 보기 페이지(피드백 구분 영역)
4. “연관 검색” → Tavily API → GPT 재가공(“내 상황 맞춤”)

### 7.3 Phase 3: 수정 & 재분석
1. 수정 기능(작문 내용 편집)  
2. 수정 시 재분석 & DB 갱신  
3. 검색/힌트/피드백 흐름 안정화  
4. 로딩/진행 상태 (Spinner/Progress Bar) 적용

### 7.4 Phase 4: README.md & 디자인 개선
1. **README.md** 작성: 설치·실행 방법, 폴더 구조, 환경변수 설정 안내  
2. 디자인 개선 포인트(파일별) 문서화  
3. QA, 버그 수정 → **MVP 완성**

---

## 8. MVP 이후 추가 개선사항

1. **로그인/회원가입** & **클라우드 배포**(Vercel, etc.)  
   - 사용자별 개인 기록 관리
2. **확장된 검색**:  
   - Tavily 외 다른 API 연동, 번역 서비스 등
3. **게이미피케이션**:  
   - 레벨업 배지, 포인트, 주제별 달성도
4. **음성 입력 & 발음 피드백**  
   - 마이크로폰 입력, 발음 교정
5. **통계 & 대시보드**  
   - 월별 학습 통계, 레벨 추이 그래프

---

## (부록) README 및 디자인 수정 안내

- **README.md**:  
  - 예시 폴더 구조, 설치/실행 방법, 환경변수(.env) 설정, GPT/Tavily API Key 사용 방법 명시  
  - CLI 예:  
    ```bash
    # 설치
    pnpm install
    
    # 개발 서버 실행
    pnpm dev
    ```  
  - 주요 디렉토리/파일:
    - `/app/` - App Router 구성
    - `/components/` - UI 컴포넌트
    - `/lib/` - GPT/Tavily API 로직, DB 접근 로직 등
    - `README.md` - 프로젝트 소개, 사용 방법

- **디자인 수정 위치**:  
  - `app/layout.tsx`, `app/page.tsx` 등 상위 구조  
  - `components/ui/` - ShadCN 컴포넌트 (버튼, 모달, 팝업, 스피너 등)  
  - `styles/globals.css`, `tailwind.config.js` - 전역 스타일, Tailwind 설정  
  - 필요 시 `components/WriteForm.tsx`, `components/HintModal.tsx` 등 개별 컴포넌트에서 Tailwind/Custom CSS 수정